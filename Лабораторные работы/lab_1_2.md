Основы работы с CLI Mikrotik
1. Подключение к маршрутизатору
2. Информация о системе маршрутизатора
3. Системное время маршрутизатора
4. Контекстная справка
5. Изменение параметров маршрутизатора. Команда SET
6. Доступные интерфейсы
7. Используемые интерфейсы
8. Создание системных объектов
9. Удаление объектов
10. Сохранение настройка маршрутизатора
11. Сохранение настройка маршрутизатора в текстовом виде
12. Восстановление настройка маршрутизатора

---

#### 1. Подключение к маршрутизатору

> Маршрутизатор доступа Mikrotik представляет собой сетевое устройство, построенное на Router OS. Пример реализации маршрутизатора на данной операционной системе приведен по ссылкеMikrotik hAP Lite. Подключение для настройки и проверки работоспособности устройства осуществляется через порт Ethernet либо по сети Wi-Fi. В некоторых моделях предусмотрено консольное подключение по COM-port.

__`Ответ:`__
`MikroTik`


#### 2. Информация о системаршрутизатора

> Интерфейс командной строки позволяет изменять любые настройки маршрутизатора с помощью текстовых команд. В связи с этим число всевозможных команд достаточно велико. Для удобства использования все команды сгруппированы по различным уровням иерархически построенного меню. Название уровня меню (подменю) отражает общее назначение доступных в этом подменю команд.

> Команда print показывает всю информацию о системе, которая доступна в текущем уровне меню.

```
/system resource print
```

> Определите версию операционной системы:

__`Ответ:`__
`6.32.3`


> Определите архитектуру маршрутизатора: 

__`Ответ:`__
`x86`


#### 3. Системное время маршрутизатора

> На маршрутизаторах Mikrotik утилиты разбиты по различным уровням подменю. Например, все утилиты для работы с системным временем расположены в подменю /system clock. Чтобы выполнить утилиту из определенного подменю, можно ввести полный путь к команде:

```
/system clock print
```

> Другой способ получения доступа к утилите – перейти сначала в нужное подменю, а затем в этом подменю выполнить требуемую команду:

> Выпишите системное время маршрутизатора

__`Ответ:`__
`22:14:44`


#### 4. Контекстная справка

> В маршрутизаторах Mikrotik реализована контекстная справка. Чтобы получить подсказку об утилитах, доступных в определенном подменю, можно перейти в это подменю и ввести в нем символ знака вопроса («?») или ввести в одной строке название подменю и затем символ знака вопроса.

> Получите контекстную справку в подменю /system clock с помощью команды '?'

```
/system clock
?
```

> Выпишите в алфавитном порядке утилиты, доступные из этого подменю (Ответы введите через пробел)

__`Ответ:`__
`.. edit export get manual print set`


#### 5. Изменение параметров маршрутизатора. Команда SET

> Изменение параметров маршрутизатора осуществляется при помощи команды set, параметры которой содержат название переменной, символ присвоения значения "=" и новое значение, например:
> где HH – часы в диапазоне 00..24, MM – минуты в диапазоне 00..59, SS – секунды в диапазоне 00..59

> Альтернативный способ изменения параметров предоставляет встроенный в операционную систему Router OS редактор edit.

> Установите системное время маршрутизатора на 6 часов вечера.

```
/system clock set time=18:00:00
```

> Проверить, что системное время установлено верно

```
/system clock print
```


#### 6. Доступные интерфейсы

> Различные модели сетевых устройств имеют разные аппаратные характеристики. Одной из таких характеристик, является количество сетевых окончаний (интерфейсов). В зависимости от их количества сетевые устройства могут физически подключаться или иметь виртуальные соединения соответствующим количеством смежных устройств.

> Получите информацию о доступных интерфейсах:

```
/interface print
```

> Определите доступные интерфейсы маршрутизатора (ответы введите через пробел)

__`Ответ:`__
`ether1 ether2 ether3 ether4`


#### 7. Используемые интерфейсы

> Маршрутизатор доступа на стенде подключен к шлюзу для предоставления пользователям IP услуг. Интерфейс управления, как правило ether1, предназначен для конфигурирования администратором сетевых узлов, посредством встроенной в оболочку консоли.

> Получите информацию об используемых интерфейсах:

`/ip address print`

> Определите используемые интерфейсы (Ответы введите через пробел в алфавитном порядке)

__`Ответ:`__
`ether1 ether3`


#### 8. Создание системных объектов

> Под системными объектами понимаются существующие или вновь создаваемые IP-адреса маршруты, пользователи и т. д. Однотипные объекты могут объединяться в упорядоченные списки, каждый элемент которых ассоциирован с конкретным объектом. Для создания новых объектов на маршрутизаторах используется команда add. Эта команда добавляет новый элемент с номером, который присваивает пользователь, по умолчанию - в конец списка.

```
/ip address
add
192.168.2.24/24
ether2
print
```


#### 9. Удаление объектов

> Для удаления созданного объекта используется команда remove. Для удаления нужно знать номер объекта.

> Удалите объект, созданный в задании "Создание системных объектов". Используйте номер объекта, который указан в консольном выводе комнады ip address print.

```
remove
2
print
```


#### 10. Сохранение настройка маршрутизатора

> При внесении изменений в конфигурацию маршрутизатора целесообразно обеспечить возможность возврата к состоянию, предшествующему внесению изменений. Для этого следует позаботиться о сохранении исходной конфигурации системы. Резервирование конфигураций позволяет сохранить настройки маршрутизатора в бинарный файл, который может быть загружен на другое устройство, например, с помощью протокола FTP для возможного последующего использования. Такой файл называется backup- файл. При необходимости, этот файл может быть по протоколу FTP считан обратно и использован для восстановления конфигурации, что позволит привести настройки маршрутизатора к тому виду, какими они были в момент сохранения.

> Команды, используемые для сохранения и восстановления конфигурации, доступны из подменю: `/system backup`. Для сохранения настроек в backup- файл используется команда `save`.

> Сохраните настройки маршрутизатора с именем файла user

```
/system backup
save name=user
```

> проверьте результат:

`/file print`
 
> Определите имя сохраненного файла настроек

__`Ответ:`__
`user.backup`


#### 11. Сохранение настройка маршрутизатора в текстовом виде

> В системе Mikrotik имеется возможность сохранения не только полного, но и частичного набора настроек, соответствующего выбранному уровню подменю. Для этого используется команда export , которая формирует сценарий (скрипт), запуск которого на выполнение, обеспечит восстановление настроек соответствующего уровня меню. Команда может быть выполнена на любом уровне меню и выполняется для этого уровня меню и всех нижележащих уровней.

> Сценарий, формируемый этой командой, может быть сохранен в файл для последующего использования. Команда имеет следующий синтаксис:

```
/
```

> Сохраните настройки в текстовом виде в файле user.txt:

```
export file=user.txt
```

> Определите имя сохраненного файла настроек

```
/file print
```

__`Ответ:`__
`user.txt.rsc`


#### 12. Восстановление настройка маршрутизатора

> Для частичного восстановления настроек необходимо инициировать сценарий, сформированный командой export и хранящийся в текстовом файле. Для этого используется команда 
`import `
`[file_name]`

> Для полного восстановления конфигурации (например, после выполнения команды `/system reset-configuration` ) используется команда load из подменю `/system backup`, применяемая к предварительно загруженному backup-файлу. Команда имеет следующий синтаксис:
`/system backup` 
`load name=file_name`

> Удалите объект, использующий интерфейс ether3, в подменю /ip address.

> Удостоверьтесь в разрыве связи между маршрутизатором доступа и шлюзом. Для обновления отображения состояния схемы используйте пиктограмму "Перезагрузить стенд" на рабочем пространстве стенда.

> Восстановите настройки маршрутизатора, используя ранее созданный бинарный файл.

> Проверьте наличие удаленного ранее объекта используя комнаду print в подменю /ip address.

```
/ip address 
print
remove
1

/system backup

load name=user.backup

пароль: admin
y
```

> Проверить восстановление удалённого ранее объекта 

`/ip address print`
